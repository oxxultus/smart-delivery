# 사용법
```c++
#include "SmartBot.h"

// SmartBot 인스턴스 생성
// 모터: 왼쪽(M1), 오른쪽(M4)
// 센서: 왼쪽(A0), 오른쪽(A5)
SmartBot bot(1, 4, A0, A5);

void setup() {
    // 초기 설정 (시리얼 통신, 모터 속도, 정지 상태 등)
    bot.begin();
}

void loop() {
    // 센서 값을 읽고 자동 주행 동작 수행 (라인 트레이싱)
    bot.update();

    // 시리얼 입력이 있는 경우 명령을 처리
    if (Serial.available()) {
        char cmd = Serial.read();  // 문자 하나 읽기

        // 'pause' 또는 'resume'이 아닌 단일 문자 'p', 'r' 등으로 명령을 주어야 함
        if (cmd == 'p') {
            bot.pause();   // 주행 일시정지 (모터 정지)
        } else if (cmd == 'r') {
            bot.resume();  // 주행 재개 (센서 동작 재개)
        }
    }
}
```

# 응용 사용법
## 송신기 (main)
```c++
#include "CommLink.h"

CommLink comm(2, 3);  // RX = D2, TX = D3

void setup() {
    Serial.begin(9600);
    comm.begin(9600);
    Serial.println("Main 시작");
    delay(1000);
}

void loop() {
    static bool paused = false;

    // 전송할 명령 결정
    String command = paused ? "CMD:RESUME" : "CMD:PAUSE";
    paused = !paused;

    // 1. 명령 전송
    bool sent = comm.sendWithAck(command);

    if (sent) {
        Serial.print("Main → 명령 전송 성공: ");
        Serial.println(command);

        // 2. 응답 대기
        unsigned long startTime = millis();
        while (millis() - startTime < 2000) {
            if (comm.hasLine()) {
                String reply = comm.receiveLine();
                reply.trim();
                Serial.print("Main ← 응답 수신: ");
                Serial.println(reply);
                comm.sendAck();  // ACK 전송
                break;
            }
        }
    } else {
        Serial.println("Main → 명령 전송 실패");
    }

    delay(8000);  // 8초 간격으로 주기적 제어
}
```
## 수신기 (sub)
```c++
#include "CommLink.h"
#include "SmartBot.h"

CommLink comm(2, 3);               // RX = D2, TX = D3
SmartBot bot(1, 4, A0, A5);        // 모터 M1/M4, 센서 A0/A5

void setup() {
    Serial.begin(9600);
    comm.begin(9600);
    bot.begin();
    Serial.println("Sub 시작");
    delay(1000);  // 초기 안정화
}

void loop() {
    // 1. 통신 요청 수신
    if (comm.hasLine()) {
        String msg = comm.receiveLine();
        msg.trim();

        Serial.print("Sub ← 수신: ");
        Serial.println(msg);

        comm.sendAck();  // 요청 수신 확인 ACK

        // 2. 명령 처리
        if (msg == "CMD:PAUSE") {
            bot.pause();
            comm.sendWithAck("REPLY:PAUSED");
        } else if (msg == "CMD:RESUME") {
            bot.resume();
            comm.sendWithAck("REPLY:RESUMED");
        } else {
            comm.sendWithAck("REPLY:UNKNOWN");
        }
    }

    // 3. 주행 로직 실행
    bot.update();

    delay(50);
}
```